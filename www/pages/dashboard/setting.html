<!doctype html>
<html lang="">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="Propeller Admin Dashboard">
<meta content="width=device-width, initial-scale=1, user-scalable=no" name="viewport">

<title>Synergy</title>
<meta name="description" content="Admin is a material design and bootstrap based responsive dashboard template created mainly for admin and backend applications."/>

<link rel="shortcut icon" type="image/x-icon" href="../../themes/images/favicon.ico">

<!-- Google icon -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Bootstrap css -->
<link rel="stylesheet" type="text/css" href="../../assets/css/bootstrap.min.css">

<!-- DataTables css-->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.1.0/css/responsive.bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.2.0/css/select.dataTables.min.css">
<!-- Propeller dataTables css-->

<link rel="stylesheet" type="text/css" href="../../components/data-table/css/pmd-datatable.css">
<!-- Propeller css -->
<!-- build:[href] assets/css/ -->
<link rel="stylesheet" type="text/css" href="../../assets/css/propeller.min.css">
<!-- /build -->

<!-- Propeller date time picker css-->
<link rel="stylesheet" type="text/css" href="../../components/datetimepicker/css/bootstrap-datetimepicker.css" />
<link rel="stylesheet" type="text/css" href="../../components/datetimepicker/css/pmd-datetimepicker.css" />

<!-- Propeller theme css-->
<link rel="stylesheet" type="text/css" href="../../themes/css/propeller-theme.css" />

<!-- Propeller admin theme css-->
<link rel="stylesheet" type="text/css" href="../../themes/css/propeller-admin.css">

</head>

<body onload="show_setting()">
<!-- Header Starts -->
<!--Start Nav bar -->
<nav class="navbar navbar-inverse navbar-fixed-top pmd-navbar pmd-z-depth">

	<div class="container-fluid">
		<div class="pmd-navbar-right-icon pull-right navigation">
			
            
		</div>
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">

			<a href="javascript:void(0);" data-target="basicSidebar" data-placement="left" data-position="slidepush" is-open="true" is-open-width="1200" class="btn btn-sm pmd-btn-fab pmd-btn-flat pmd-ripple-effect pull-left margin-r8 pmd-sidebar-toggle"><i class="material-icons md-light">menu</i></a>	
		  <a href="../../index.html" class="navbar-brand">
		  			  	
		  </a>
		</div>
	</div>

</nav><!--End Nav bar -->
<!-- Header Ends -->

<!-- Sidebar Starts -->
<div class="pmd-sidebar-overlay"></div>

<!-- Left sidebar -->
<aside id="basicSidebar" class="pmd-sidebar  sidebar-default pmd-sidebar-slide-push pmd-sidebar-left pmd-sidebar-close bg-fill-darkblue sidebar-with-icons" role="navigation">
	<ul class="nav pmd-sidebar-nav">
		
		<!-- User info -->
		<li class="dropdown pmd-dropdown pmd-user-info visible-xs visible-md visible-sm visible-lg">
			<a aria-expanded="false" data-toggle="dropdown" class="btn-user dropdown-toggle media" data-sidebar="true" aria-expandedhref="javascript:void(0);">
				<div class="media-left">
					<img src="../../themes/images/synergy-logo.png" alt="New User">
				</div>
				<div class="media-body media-middle"></div>
				<div class="media-right media-middle"><i class="dic-more-vert dic"></i></div>
			</a>
			</li><!-- End user info -->
		
		<li> 
			<a class="pmd-ripple-effect" href="../../index.html">	
				<i class="media-left media-middle"><svg version="1.1" x="0px" y="0px" width="19.83px" height="18px" viewBox="287.725 407.535 19.83 18" enable-background="new 287.725 407.535 19.83 18"
	 xml:space="preserve">
<g>
	<path fill="#C9C8C8" d="M307.555,407.535h-9.108v10.264h9.108V407.535z M287.725,407.535v6.232h9.109v-6.232H287.725z
		 M296.834,415.271h-9.109v10.264h9.109V415.271z M307.555,419.303h-9.108v6.232h9.108V419.303z"/>
</g>
</svg></i>
				<span class="media-body">Dashboard</span>
			</a> 
		</li>
		
		
		<li class="dropdown pmd-dropdown"> 
			<a aria-expanded="false" data-toggle="dropdown" class="btn-user dropdown-toggle media" data-sidebar="true" href="javascript:void(0);">	
				<i class="material-icons media-left pmd-sm">receipt</i> 
				<span class="media-body">Invoice</span>
				<div class="media-right media-bottom"><i class="dic-more-vert dic"></i></div>
			</a> 
			<ul class="dropdown-menu">
				<li><a href="../invoice/add_invoice.html">Add Invoice</a></li>
				<li><a href="../invoice/list_invoice.html">List Invoices</a></li>
				<li><a href="../invoice/payment_history.html">Payment History</a></li>				
			</ul>
		</li>
		
		
		<li class="dropdown pmd-dropdown"> 
			<a aria-expanded="false" data-toggle="dropdown" class="btn-user dropdown-toggle media" data-sidebar="true" href="javascript:void(0);">	
				<i class="media-left media-middle"><svg version="1.1" x="0px" y="0px" width="18px" height="12.706px" viewBox="0 0 18 12.706" enable-background="new 0 0 18 12.706" xml:space="preserve">
<path fill="#C9C8C8" d="M0,0v12.706h18V0H0z M12.706,4.235v3.176H9.108V4.235H12.706z M8.049,4.235v3.176h-6.99V4.235H8.049z
	 M1.059,8.47h6.99v3.177h-6.99V8.47z M9.108,11.647V8.47h3.599v3.177H9.108z M13.766,11.647V8.47h3.176v3.177H13.766z M16.942,7.412
	h-3.176V4.235h3.176V7.412L16.942,7.412z"/>
</svg></i> 
				<span class="media-body">Projects</span>
				<div class="media-right media-bottom"><i class="dic-more-vert dic"></i></div>
			</a> 
			<ul class="dropdown-menu">
				<li><a href="../projects/add_project.html">Add Project</a></li>
				<li><a href="../projects/list_project.html">List Projects</a></li>
				
			</ul>
		</li>
		<li class="dropdown pmd-dropdown"> 
			<a aria-expanded="false" data-toggle="dropdown" class="btn-user dropdown-toggle media" data-sidebar="true" href="javascript:void(0);">	
				<i class="material-icons media-left pmd-sm">account_circle</i> 
				<span class="media-body">Profiles</span>
				<div class="media-right media-bottom"><i class="dic-more-vert dic"></i></div>
			</a> 
			<ul class="dropdown-menu">
				<li><a href="../profiles/Employee_Profiles.html">Employee Profiles</a></li>
				<li><a href="../profiles/Tech_Profiles.html">Tech Profiles</a></li>
				<li><a href="../profiles/Customer_Profiles.html">Customer Profiles</a></li>
			</ul>
		</li>

		<li class="dropdown pmd-dropdown"> 
			<a aria-expanded="false" data-toggle="dropdown" class="btn-user dropdown-toggle media" data-sidebar="true" href="javascript:void(0);">	
				<i class="material-icons media-left pmd-sm">library_books</i> 
				<span class="media-body">Reports</span>
				<div class="media-right media-bottom"><i class="dic-more-vert dic"></i></div>
			</a> 
			<ul class="dropdown-menu">
				<li><a href="../reports/profile_report.html">Profile Report</a></li>
				<li><a href="../reports/project_report.html">Project Report</a></li>
				<li><a href="../reports/ticket_report.html">Ticket Report</a></li>
			</ul>
		</li>

		
		<li> 
			<a class="pmd-ripple-effect" href="../../login.html">	
				<i class="media-left media-middle">
				<svg version="1.1" id="Layer_1" x="0px" y="0px" width="18px" height="18px" viewBox="288.64 337.535 18 18" enable-background="new 288.64 337.535 18 18" xml:space="preserve">
				<path fill="#C9C8C8" d="M295.39,337.535v2.25h9v13.5h-9v2.25h11.25v-18H295.39z M297.64,342.035v3.375h-9v2.25h9v3.375l3.375-3.375
					l1.125-1.125l-1.125-1.125L297.64,342.035z"/>
				</svg></i> 
				<span class="media-body">Log Out</span>
			</a> 
		</li>
		
		
	</ul>
</aside><!-- End Left sidebar -->
<!-- Sidebar Ends -->  
	
<!--content area start-->
<Script>
					    update_setting = function() {
					    	
					    	//if it is customer
					    	if (localStorage.data3 == 1){
					    		var c_name = document.getElementById('c_name').value;
					    		var f_name = document.getElementById('f_name').value;
						    	var l_name = document.getElementById('l_name').value;
						    	var email = document.getElementById('email').value;
						    	var b_email = document.getElementById('b_email').value;
						    	var p_number = document.getElementById('p_number').value;
					    		$.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "saveSettings",
					                "id" : "1",
					                   "params": {
												                             "id": localStorage.myid,
														                     "is_customer": localStorage.data3,
														                     "internal_user_external_user": localStorage.data2,
												                       //       "id": "1022",
														                     // "is_customer": "0",
														                     // "internal_user_external_user": "1",
														                     "profile_details": {
																					"companyname": c_name,
																					"first_name": f_name,
																					"last_name": l_name,
																					"contact_number": p_number,
																					"business_email": b_email
																					
																				}




					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),
					                success: function (result) {
					                	
								        console.log(result);
								        
								    }

					      
					        });

					    	}
					    	else {
					    		var f_name = document.getElementById('f_name').value;
						    	var l_name = document.getElementById('l_name').value;
						    	var email = document.getElementById('email').value;
						    	var b_email = document.getElementById('b_email').value;
						    	var p_number = document.getElementById('p_number').value;


					        $.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "saveSettings",
					                "id" : "1",
					                   "params": {
												                             "id": localStorage.myid,
														                     "is_customer": localStorage.data3,
														                     "internal_user_external_user": localStorage.data2,
												                       //       "id": "1022",
														                     // "is_customer": "0",
														                     // "internal_user_external_user": "1",
														                     "profile_details": {
																					"first_name": f_name,
																					"last_name": l_name,
																					"contact_number": p_number,
																					"business_email": b_email
																					
																				}




					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),
					                success: function (result) {
					                	
								        console.log(result);
								        if(typeof result.error !== 'undefined') {
									        if (code2 = 401) {
									        document.getElementById("alertred").click();
									   		}
									   		}else if (typeof result.result !== 'undefined'){
									   			if (code2 = 200) {
									   				document.getElementById("alertgreen").click();
									   			}

									   		}
								        
								    }

					      
					        });
					    };
					        
					    };
					     update_password = function() {
					    	
					    	var current_password = document.getElementById('current_password').value;
					    	var new_password = document.getElementById('new_password').value;
					    	var confirm_new_password = document.getElementById('confirm_new_password').value;
					    	
            				


					        $.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "saveSettings",
					                "id" : "1",
					                   "params": {
												                             "id": localStorage.myid,
														                     "is_customer": localStorage.data3,
														                     "internal_user_external_user": localStorage.data2,
												                       //       "id": "1022",
														                     // "is_customer": "0",
														                     // "internal_user_external_user": "1",
														                     "profile_details": {																					
																					"current_password": current_password,
																					"new_password": new_password,
																					"confirm_new_password": confirm_new_password
																				}




					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),
					                success: function (result) {
					                	
								        console.log(result);
								        if(typeof result.error !== 'undefined') {
									        if (code2 = 401) {
									        document.getElementById("alertred").click();
									   		}
									   		}else if (typeof result.result !== 'undefined'){
									   			if (code2 = 200) {
									   				document.getElementById("alertgreen2").click();
									   			}

									   		}	
								        // if (result.result.code == 200) {
					           //      	document.getElementById("alertgreen2").click();	
					           //      	}			                	  
					           //      	else{
					           //      		document.getElementById("alertred").click();
					           //      	}
								       
								    }

					      
					        });
					        
					    };
					    show_setting = function() {
					    	if(localStorage.myemail === undefined) {
					    		window.location.href = "../../login.html";
											        }
					    	console.log(localStorage.myid);

					        	// sessionStorage.setItem("category_id", cust);
					        	// console.log(cust);
					        	// document.getElementById("show_category").value = cust;

					        	 $.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "getSettings",
					                "id" : "1",
					                   "params": {
												     "id": localStorage.myid,
								                     "is_customer": localStorage.data3,
								                     "internal_user_external_user": localStorage.data2
												  //       "id": "1",
														// "is_customer": "1",
														// "internal_user_external_user": "0"



					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),
					                success: function (result) {
					                	 console.log(result);

					                	var f_name = result.result.details.first_name;
					                	var l_name = result.result.details.last_name;
					                	// var email = ;
					                	var b_email = result.result.details.business_email;
					                	var c_number = result.result.details.contact_number;
					                	var u_pic = result.result.details.profile_picture;
					                	document.getElementById("myImg").src = u_pic;

					                		if(result.result.details.other_files === undefined) {
											        }
											        else{
											        	$("#files").html("");
										         var keys = Object.keys(result.result.details.other_files);								        
											        var list = result.result.details.other_files;
											        var len = keys.length;
											        console.log(list['A']);	
											        var mark = [];
											        var taskid = [];
											        console.log(keys);
											        //if it is Employee
											       
											        							  
													for (var i = 0; i < len; ++i) {										
													     mark[i] = (list[keys[i]]);
													     $("#files").append("<a href = '"+mark[i]['file']+"'>File Nanme: "+mark[i]['file_name']+"</a><br></br>");	
													     console.log(mark[i]['file']);				     				   								    
													}
											        }


					                	// var file1 = result.result.details.profile_picture;
					                	// document.getElementById("file1").href = "http://supervisabrampton.com/"+u_pic;
					                	// var file2 = result.result.details.profile_picture;
					                	// document.getElementById("file2").href = "http://supervisabrampton.com/"+u_pic;
					                	// var file3 = result.result.details.profile_picture;
					                	// document.getElementById("file3").href = "http://supervisabrampton.com/"+u_pic;

					                	document.getElementById("f_name").value = f_name;
					                	document.getElementById("l_name").value = l_name;
					                	document.getElementById("b_email").value = b_email;
					                	document.getElementById("p_number").value = c_number;
					                	
					                	// console.log(dataset);

					                	
					                }
					            });

					        	


					    	
					    };//end of show category function

					</script>
<div id="content" class="pmd-content inner-page">

	<!--tab start-->
	<div class="container-fluid full-width-container about">
		<!-- Title -->
		<h1 class="section-title" id="services">
			<span>Settings</span>
		</h1><!-- End Title -->
	
		<!--breadcrum start-->
		<ol class="breadcrumb text-left">
		  <li><a href="../../index.html">Dashboard</a></li>
		  <li class="active">Settings</li>
		</ol><!--breadcrum end-->
	
		<div class="page-content profile-edit section-custom">
			<div class="pmd-card pmd-z-depth">
				<div class="pmd-card-body">
					<div class="row">

						<div data-provides="fileinput" class="fileinput fileinput-new col-lg-3">
							<div data-trigger="fileinput" class="fileinput-preview thumbnail img-circle img-responsive">
								<img style="width: 100%; max-width: 160px; max-height: 160px; height: 100%;" id="myImg" src="../../themes/images/avtar-b.jpg">
							</div>
							<div class="action-button"> 
								<span class="btn btn-default btn-raised btn-file ripple-effect">
									<span class="fileinput-new"><i class="material-icons md-light pmd-xs">add</i></span>
									<span class="fileinput-exists"><i class="material-icons md-light pmd-xs">mode_edit</i></span>
									<input type="file" onchange="encodeImageFileAsURL(this)" />
								</span> 
								<a data-dismiss="fileinput" class="btn btn-default btn-raised btn-file ripple-effect fileinput-exists" href="javascript:void(0);"><i class="material-icons md-light pmd-xs">close</i></a>
							</div>
						</div>
						
						<div class="col-lg-9 custom-col-9">
							<h3 class="heading">Personal Information</h3>
							<div class="row">
								<form class="form-horizontal">
								  <fieldset>
										<!-- <div class="form-group prousername pmd-textfield">
										  <label class="control-label col-sm-3">Username</label>
										  <div class="col-sm-9">
											<p class="form-control-static"><strong>andrew.dane</strong></p>
										  </div>
										</div> -->
										<div id = "show_c_name" style="display: none; width: 100%" class="form-group pmd-textfield">
										  <label class="col-sm-3 control-label" for="u_fname">Company Name</label>
										  <div class="col-sm-9">
											  <input type="text" class="form-control " id="c_name" value="">
										  </div>
										</div>
										<div class="form-group pmd-textfield">
										  <label class="col-sm-3 control-label" for="u_fname">First Name</label>
										  <div class="col-sm-9">
											  <input type="text" class="form-control " id="f_name" value="">
										  </div>
										</div>
										<div class="form-group pmd-textfield">
										  <label class="col-sm-3 control-label" for="u_fname">Last Name</label>
										  <div class="col-sm-9">
											  <input type="text" class="form-control " id="l_name" value="">
										  </div>
										</div>
										<div class="form-group pmd-textfield">
										  <label class="col-sm-3 control-label" for="u_fname">Email</label>
										  <div class="col-sm-9">
											  <input type="email" class="form-control " value="" id="email" value="">
										  </div>
										</div>
										<div class="form-group pmd-textfield">
										  <label class="col-sm-3 control-label" for="u_fname">Bussiness Email</label>
										  <div class="col-sm-9">
											  <input type="email" class="form-control " value="" id="b_email" value="">
										  </div>
										</div>
										<div class="form-group pmd-textfield">
										  <label class="col-sm-3 control-label" for="u_fname">Contact Number</label>
										  <div class="col-sm-9">
											  <input type="number" class="form-control " id="p_number" value="">
										  </div>
										</div>
										<div class="pmd-card pmd-z-depth pmd-card-custom-form"> 
																	<div class="pmd-card-body">
																		<div id = "files" >
																			
																		</div>
																	</div>
																</div> <br></br>
										<div class="col-md-6 col-sm-6"> 
											<button data-target="#form-dialog" data-toggle="modal" class="btn pmd-ripple-effect btn-primary pmd-z-depth" type="button">Change Password</button>

											<!-- File Upload Start -->
											<button data-target="#form-dialog2" data-toggle="modal" class="btn pmd-ripple-effect btn-primary pmd-z-depth" type="button">file upload</button><br></br>
											<div tabindex="-1" class="modal fade2" id="form-dialog2" style="display: none;" aria-hidden="true">
												<div class="modal-dialog">
													<div class="modal-content">
														<div class="modal-header bordered">
															<button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
															<h3 class="pmd-card-title-text">Upload Files</h3>
														</div>
														<div class="modal-body">
															
															<input type="text" class="form-control"  id="file_name" value=""><br></br>
															
															<input type="file" onchange="encodeImageFileAsURL2(this)" />


															<!-- Progress Bar Start -->
										                    <div id="pro_bar2" style="display: none;" class="row">
										                    	<div class="col-md-12"> 
										                      		
										                        		<div class="pmd-card-body"> 
										                          			
										                          			<div class="progress-rounded progress pmd-progress">
									                                		<div id="myBar2" class="progress-bar progress-bar-info" style="width: 0%;"></div>
									                              		</div>
										                        		</div>
										                      		
										                    	</div>
										                  </div>
										                  <!-- Progress Bar End -->
														</div>
														<div class="pmd-modal-action">

															<button onclick="submitfile2()" data-dismiss="modal"  class="btn pmd-ripple-effect btn-primary" type="button">Submit</button>
															<button data-dismiss="modal"  class="btn pmd-ripple-effect btn-default" type="button">Discard</button>
														</div>
													</div>
												</div>
											</div>
											<!-- File Upload Ends -->
											
											<div tabindex="-1" class="modal fade" id="form-dialog" style="display: none;" aria-hidden="true">
												<div class="modal-dialog">
													<div class="modal-content">
														<div class="modal-header bordered">
															<button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
															<h3 class="pmd-card-title-text">Change Password</h3>
														</div>
														<div class="modal-body">
															<form class="form-horizontal">
																<div class="form-group pmd-textfield pmd-textfield-floating-label">
																	<label for="first-name">Current password</label>
																	<input type="password" class="mat-input form-control" id="current_password" value="">
																	 </div>
																<div class="form-group pmd-textfield pmd-textfield-floating-label">
																	<label for="first-name">New password</label>
																	<input type="password" class="mat-input form-control" id="new_password" value="" >
																</div>
																<div class="form-group pmd-textfield pmd-textfield-floating-label">
																	<label for="first-name">Re-enter password</label>
																	<input type="password" class="mat-input form-control" id="confirm_new_password" value="">
																</div>
																
															</form>
														</div>
														<div class="pmd-modal-action">
															<button data-dismiss="modal"  class="btn pmd-ripple-effect btn-primary" type="button">Save changes</button>
															<button data-dismiss="modal"  class="btn pmd-ripple-effect btn-default" type="button">Discard</button>
														</div>
													</div>
												</div>
											</div>
										</div>
										
										
							

										<div class="form-group btns margin-bot-30">
										  <div class="col-sm-9 col-sm-offset-3">
											<button data-dismiss="modal" onClick=" update_setting()"  class="btn pmd-ripple-effect btn-primary" type="button">Update</button>
											<button class="btn btn-default btn-link pmd-ripple-effect">Cancel</button>
										  </div>
										 <button style="display: none;" id = "alertgreen" type="button" data-positionX="right"data-positionY="top"data-effect="fadeInUp"data-message="You successfully updated the settings"data-type="success" class="btn pmd-ripple-effect btn-success pmd-z-depth pmd-alert-toggle">Alert Success</button>
										 <button style="display: none;" id = "alertgreen2" type="button" data-positionX="right"data-positionY="top"data-effect="fadeInUp"data-message="You successfully updated the password"data-type="success" class="btn pmd-ripple-effect btn-success pmd-z-depth pmd-alert-toggle">Alert Success</button>
										<button style="display: none;" id = "alertred" type="button" data-positionX="right"data-positionY="top"data-effect="fadeInUp"data-message="Something is wrong. Please try submitting again."data-type="error" class="btn pmd-ripple-effect btn-danger pmd-z-depth pmd-alert-toggle">Alert Error</button>
										</div>

								  </fieldset>
								</form>
							</div>
							
						</div>
					</div>
				</div>
			</div>
		</div>
	</div><!-- tab end -->
	
</div><!--end content area-->

<!-- Footer Starts -->
<!--footer start-->
<footer class="admin-footer">
 <div class="container-fluid">
 	<ul class="list-unstyled list-inline">
	 	<li>
			<span class="pmd-card-subtitle-text">Synergy &copy; <span class="auto-update-year"></span>. All Rights Reserved.</span>
			<!-- <h3 class="pmd-card-subtitle-text">Licensed under <a href="https://opensource.org/licenses/MIT" target="_blank">MIT license.</a></h3> -->
        </li>
        
    </ul>
 </div>
</footer>
<!--footer end-->
<!-- Footer Ends -->

<!-- File Upload Script Starts -->
<script type="text/javascript">
	//File Uploads Start

	
   function encodeImageFileAsURL(element) {
   	// pro_bar.style.display = "block";
  var file = element.files[0];
  var reader = new FileReader();
  reader.onloadend = function() {
    console.log('RESULT', reader.result);
    sessionStorage.setItem("result", reader.result);
    submitfile();
  //   var elem = document.getElementById("myBar");   
  // var width = 10;
  // var id = setInterval(frame, 10);
  // function frame() {
  //   if (width >= 100) {
  //     clearInterval(id);
  //   } else {
  //     width++; 
  //     elem.style.width = width + '%'; 
  //     elem.innerHTML = width * 1  + '%';
  //   }
  // }
    // console.log(sessionStorage.result);

     
  }
  reader.readAsDataURL(file);

}
function encodeImageFileAsURL2(element) {
   	pro_bar2.style.display = "block";
  var file = element.files[0];
 var file_name = document.getElementById('file_name').value;
  var reader = new FileReader();
  reader.onloadend = function() {
    console.log('RESULT', reader.result);
    sessionStorage.setItem("result2", reader.result);
    sessionStorage.setItem("result2_name", file_name);
    
    var elem = document.getElementById("myBar2");   
  var width = 10;
  var id = setInterval(frame, 10);
  function frame() {
    if (width >= 100) {
      clearInterval(id);
    } else {
      width++; 
      elem.style.width = width + '%'; 
      elem.innerHTML = width * 1  + '%';
    }
  }
    // console.log(sessionStorage.result);

     
  }
  reader.readAsDataURL(file);

}
function submitfile(){
	$.ajax({
            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "saveSettings",
					                "id" : "1",
					                   "params": {
												     "id": localStorage.myid,
								                     "is_customer": localStorage.data3,
								                     "internal_user_external_user": localStorage.data2,
												  //       "id": "1",
														// "is_customer": "1",
														// "internal_user_external_user": "0"
														"profile_details": {
															"files": sessionStorage.result
														}



					            				},
					            "dataType": "json",
								// "cache": false,
								"contentType": false,
								"processData": false
					            
					                }),
					                success: function (result) {
					                	
								        console.log(result);
								        // setTimeout(window.location.reload(),5000)
								        window.location.reload();
								    }

        });
}
function submitfile2(){
	$.ajax({
            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "saveSettings",
					                "id" : "1",
					                   "params": {
												     "id": localStorage.myid,
								                     "is_customer": localStorage.data3,
								                     "internal_user_external_user": localStorage.data2,
												  //       "id": "1",
														// "is_customer": "1",
														// "internal_user_external_user": "0"
														"profile_details": {
															"other_files": [{
																		"file_name": sessionStorage.result2_name,
																		"file": sessionStorage.result2
																	}]

														}



					            				},
					            "dataType": "json",
								// "cache": false,
								"contentType": false,
								"processData": false
					            
					                }),
					                success: function (result) {
					                	
								        console.log(result);
								        // setTimeout(window.location.reload(),5000)
								        window.location.reload();
								    }

        });
}
//File Upload Ends
</script>
<!-- File Upload Script Ends -->

<script src="../../assets/js/jquery-1.12.2.min.js"></script>
<script src="../../assets/js/bootstrap.min.js"></script>
<script src="../../assets/js/propeller.min.js"></script>
<script type="text/javascript">
				// var data3 = 0; 
				// var x1 = document.getElementById("profiles_menu_id");
				// var x2 = document.getElementById("invoice_menu_id");
				// var x3 = document.getElementById("report_menu_id");	
				// var x4 = document.getElementById("project_menu_id");
				// var x5 = document.getElementById("add_project_menu_id");
				// var x6 = document.getElementById("add_invoice_menu_id");
				// var x7 = document.getElementById("profile_report_menu_id");
				// var x8 = document.getElementById("project_report_menu_id");
				var x20 = document.getElementById("show_c_name");

				//for tech
            	if (localStorage.data2 == 0) {
							
				 
				 // x1.style.display = "none";
				 // x2.style.display = "none";
				 // x4.style.display = "none";	
				 // x7.style.display = "none";
				 // x8.style.display = "none";			 
				}
				//for customer
				if (localStorage.data3 == 1) {
				
				
				 // x.style.display = "none";
				 
				 // x1.style.display = "none";
				 // x3.style.display = "none";
				 // x5.style.display = "none";
				 // x6.style.display = "none";
				 x20.style.display = "inline-block";
				}
			</script>


</body>
</html>