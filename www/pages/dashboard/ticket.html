<!doctype html>
<html lang="">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="Propeller Admin Dashboard">
<meta content="width=device-width, initial-scale=1, user-scalable=no" name="viewport">

<title>Synergy</title>
<meta name="description" content="Admin is a material design and bootstrap based responsive dashboard template created mainly for admin and backend applications."/>

<link rel="shortcut icon" type="image/x-icon" href="../../themes/images/favicon.ico">

<!-- Google icon -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Bootstrap css -->
<link rel="stylesheet" type="text/css" href="../../assets/css/bootstrap.min.css">

<!-- DataTables css-->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.1.0/css/responsive.bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.2.0/css/select.dataTables.min.css">
<!-- Propeller dataTables css-->

<script type="text/javascript" language="javascript" src="../../components/datetimepicker/js/moment-with-locales.js"></script>
<link rel="stylesheet" type="text/css" href="../../components/data-table/css/pmd-datatable.css">
<!-- Propeller css -->
<!-- build:[href] assets/css/ -->
<link rel="stylesheet" type="text/css" href="../../assets/css/propeller.min.css">
<!-- /build -->

<!-- Propeller date time picker css-->
<link rel="stylesheet" type="text/css" href="../../components/datetimepicker/css/bootstrap-datetimepicker.css" />
<link rel="stylesheet" type="text/css" href="../../components/datetimepicker/css/pmd-datetimepicker.css" />

<!-- Propeller theme css-->
<link rel="stylesheet" type="text/css" href="../../themes/css/propeller-theme.css" />

<!-- Propeller admin theme css-->
<link rel="stylesheet" type="text/css" href="../../themes/css/propeller-admin.css">

</head>

<body onload="ticket();">
<!-- Header Starts -->
<!--Start Nav bar -->
<nav class="navbar navbar-inverse navbar-fixed-top pmd-navbar pmd-z-depth">

	<div class="container-fluid">
		<div class="pmd-navbar-right-icon pull-right navigation">
			
            
		</div>
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">

			<a href="javascript:void(0);" data-target="basicSidebar" data-placement="left" data-position="slidepush" is-open="true" is-open-width="1200" class="btn btn-sm pmd-btn-fab pmd-btn-flat pmd-ripple-effect pull-left margin-r8 pmd-sidebar-toggle"><i class="material-icons md-light">menu</i></a>	
		  <a href="../../index.html" class="navbar-brand">
		  			  	
		  </a>
		</div>
	</div>

</nav><!--End Nav bar -->
<!-- Header Ends -->

<!-- Sidebar Starts -->
<div class="pmd-sidebar-overlay"></div>

<!-- Left sidebar -->
<aside id="basicSidebar" class="pmd-sidebar  sidebar-default pmd-sidebar-slide-push pmd-sidebar-left pmd-sidebar-close bg-fill-darkblue sidebar-with-icons" role="navigation">
	<ul class="nav pmd-sidebar-nav">
		
		<!-- User info -->
		<li class="dropdown pmd-dropdown pmd-user-info visible-xs visible-md visible-sm visible-lg">
			<a aria-expanded="false" data-toggle="dropdown" class="btn-user dropdown-toggle media" data-sidebar="true" aria-expandedhref="javascript:void(0);">
				<div class="media-left">
					<img src="../../themes/images/synergy-logo.png" alt="New User">
				</div>
				<div class="media-body media-middle"></div>
				<div class="media-right media-middle"><i class="dic-more-vert dic"></i></div>
			</a>
			</li><!-- End user info -->
		
		<li> 
			<a class="pmd-ripple-effect" href="../../index.html">	
				<i class="media-left media-middle"><svg version="1.1" x="0px" y="0px" width="19.83px" height="18px" viewBox="287.725 407.535 19.83 18" enable-background="new 287.725 407.535 19.83 18"
	 xml:space="preserve">
<g>
	<path fill="#C9C8C8" d="M307.555,407.535h-9.108v10.264h9.108V407.535z M287.725,407.535v6.232h9.109v-6.232H287.725z
		 M296.834,415.271h-9.109v10.264h9.109V415.271z M307.555,419.303h-9.108v6.232h9.108V419.303z"/>
</g>
</svg></i>
				<span class="media-body">Dashboard</span>
			</a> 
		</li>
		
		
		<li class="dropdown pmd-dropdown"> 
			<a aria-expanded="false" data-toggle="dropdown" class="btn-user dropdown-toggle media" data-sidebar="true" href="javascript:void(0);">	
				<i class="material-icons media-left pmd-sm">receipt</i> 
				<span class="media-body">Invoice</span>
				<div class="media-right media-bottom"><i class="dic-more-vert dic"></i></div>
			</a> 
			<ul class="dropdown-menu">
				<li><a href="../invoice/add_invoice.html">Add Invoice</a></li>
				<li><a href="../invoice/list_invoice.html">List Invoices</a></li>
				<li><a href="../invoice/payment_history.html">Payment History</a></li>				
			</ul>
		</li>
		
		
		<li class="dropdown pmd-dropdown"> 
			<a aria-expanded="false" data-toggle="dropdown" class="btn-user dropdown-toggle media" data-sidebar="true" href="javascript:void(0);">	
				<i class="media-left media-middle"><svg version="1.1" x="0px" y="0px" width="18px" height="12.706px" viewBox="0 0 18 12.706" enable-background="new 0 0 18 12.706" xml:space="preserve">
<path fill="#C9C8C8" d="M0,0v12.706h18V0H0z M12.706,4.235v3.176H9.108V4.235H12.706z M8.049,4.235v3.176h-6.99V4.235H8.049z
	 M1.059,8.47h6.99v3.177h-6.99V8.47z M9.108,11.647V8.47h3.599v3.177H9.108z M13.766,11.647V8.47h3.176v3.177H13.766z M16.942,7.412
	h-3.176V4.235h3.176V7.412L16.942,7.412z"/>
</svg></i> 
				<span class="media-body">Projects</span>
				<div class="media-right media-bottom"><i class="dic-more-vert dic"></i></div>
			</a> 
			<ul class="dropdown-menu">
				<li><a href="../projects/add_project.html">Add Project</a></li>
				<li><a href="../projects/list_project.html">List Projects</a></li>
				
			</ul>
		</li>
		<li class="dropdown pmd-dropdown"> 
			<a aria-expanded="false" data-toggle="dropdown" class="btn-user dropdown-toggle media" data-sidebar="true" href="javascript:void(0);">	
				<i class="material-icons media-left pmd-sm">account_circle</i> 
				<span class="media-body">Profiles</span>
				<div class="media-right media-bottom"><i class="dic-more-vert dic"></i></div>
			</a> 
			<ul class="dropdown-menu">
				<li><a href="../profiles/Employee_Profiles.html">Employee Profiles</a></li>
				<li><a href="../profiles/Tech_Profiles.html">Tech Profiles</a></li>
				<li><a href="../profiles/Customer_Profiles.html">Customer Profiles</a></li>
			</ul>
		</li>

		<li class="dropdown pmd-dropdown"> 
			<a aria-expanded="false" data-toggle="dropdown" class="btn-user dropdown-toggle media" data-sidebar="true" href="javascript:void(0);">	
				<i class="material-icons media-left pmd-sm">library_books</i> 
				<span class="media-body">Reports</span>
				<div class="media-right media-bottom"><i class="dic-more-vert dic"></i></div>
			</a> 
			<ul class="dropdown-menu">
				<li><a href="../reports/profile_report.html">Profile Report</a></li>
				<li><a href="../reports/project_report.html">Project Report</a></li>
				<li><a href="../reports/ticket_report.html">Ticket Report</a></li>
			</ul>
		</li>

		
		<li> 
			<a class="pmd-ripple-effect" href="../../login.html">	
				<i class="media-left media-middle">
				<svg version="1.1" id="Layer_1" x="0px" y="0px" width="18px" height="18px" viewBox="288.64 337.535 18 18" enable-background="new 288.64 337.535 18 18" xml:space="preserve">
				<path fill="#C9C8C8" d="M295.39,337.535v2.25h9v13.5h-9v2.25h11.25v-18H295.39z M297.64,342.035v3.375h-9v2.25h9v3.375l3.375-3.375
					l1.125-1.125l-1.125-1.125L297.64,342.035z"/>
				</svg></i> 
				<span class="media-body">Log Out</span>
			</a> 
		</li>
		
		
	</ul>
</aside><!-- End Left sidebar -->
<!-- Sidebar Ends -->  
	
<!--content area start-->

<div id="content" class="pmd-content inner-page">

<!--tab start-->
<div class="container-fluid full-width-container data-tables">
		<!-- Title -->
		<h1 class="section-title" id="services">
			<span>Ticket List</span>
		</h1><!-- End Title -->
	
		<!--breadcrum start-->
		<ol class="breadcrumb text-left">
		  <li><a href="../../index.html">Dashboard</a></li>
		  <li id="add_tic"><a href="add_ticket.html">Add Ticket</a></li>
		  <li class="active">Ticket List</li>
		  <li><a href="ticket_categories.html">Ticket Category</a></li>
		</ol>
		
		
		<!-- Responsive table -->
		<section class="row component-section">
		
			<!-- responsive table title and description -->
			 <!-- responsive table title and description end -->
			
			<!-- responsive table code and example -->
			<Script>
					    ticket = function() {
					    	if(localStorage.myemail === undefined) {
					    		window.location.href = "../../login.html";
											        }
					    	


					        $.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "listTickets",
					                "id" : "1",
					                   "params": {
												     "id": localStorage.myid,
								                     "is_customer": localStorage.data3,
								                     "internal_user_external_user": localStorage.data2


					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),
					                success: function (result) {
					                	
								        console.log(result);
								        var keys = Object.keys(result.result.list);								        
								        var list = result.result.list;
								        var len = keys.length;	
								        var mark = [];
								        var taskid = [];
								        var dataset = [];
								        //if it is Employee
								        if (localStorage.data2 == 1){
								        							  
										for (var i = 0; i < len; ++i) {										
										     mark[i] = (list[keys[i]]);					     				   								    
										}

										for (var i = 0; i < len; ++i) {										

										     this["taskid"+i] = (mark[i]['taskid']);
										     this["title"+i] = (mark[i]['title']);
										     this["category_name"+i] = (mark[i]['category_name']);
										     this["priority"+i] = (mark[i]['priority']);
										     this["project_name"+i] = (mark[i]['project_name']);
										     this["created_on"+i] = (mark[i]['created_on']);
										     this["created_by_name"+i] = (mark[i]['created_by_name']);
										     this["status"+i] = (mark[i]['status']);
										     this["show_customer"+i] = (mark[i]['show_customer']);
										     this["id"+i] = (mark[i]['id']);
										     this["project_id"+i] = (mark[i]['project_id']);

										     				   										    
										}
										for (var i = 0; i < len; ++i) {		
										     dataset[i]  = [this["taskid"+i], this["title"+i],this["category_name"+i], this["priority"+i], this["project_name"+i], this["created_on"+i], this["created_by_name"+i], this["status"+i], this["show_customer"+i], attrs = "<a data-target='#form-dialog' data-toggle='modal' onClick = show_comment(" + this["id"+i] +"," +this["project_id"+i]+")>Click Here</a>"];	

										}

										var myVariableHere = "Ticket Name";
										var myVariableHere2 = "Category";
										var myVariableHere3 = "Priority";
										var myVariableHere4 = "Project Name";
										var myVariableHere5 = "Created On";
										var myVariableHere6 = "Created By";
										var myVariableHere7 = "Status";
										var myVariableHere8 = "Show/Not Show";
										var myVariableHere9 = "Action";
									}//end of Employee
									//if it is Tech
									else if (localStorage.data2 == 2){
										for (var i = 0; i < len; ++i) {										
										     mark[i] = (list[keys[i]]);					     				   								    
										}

										for (var i = 0; i < len; ++i) {										

										     this["taskid"+i] = (mark[i]['taskid']);
										     this["title"+i] = (mark[i]['title']);
										     this["category_name"+i] = (mark[i]['category_name']);
										     this["priority"+i] = (mark[i]['priority']);
										     this["project_name"+i] = (mark[i]['project_name']);
										     this["created_on"+i] = (mark[i]['created_on']);
										     this["created_by_name"+i] = (mark[i]['created_by_name']);
										     this["status"+i] = (mark[i]['status']);
										     this["show_customer"+i] = (mark[i]['show_customer']);

										     				   										    
										}
										for (var i = 0; i < len; ++i) {		
										     dataset[i]  = [this["taskid"+i], this["title"+i],this["category_name"+i], this["priority"+i], this["project_name"+i], this["created_on"+i], this["created_by_name"+i], this["status"+i], this["show_customer"+i], attrs = "<a data-target='#form-dialog' data-toggle='modal' onClick = show_comment(" + this["id"+i] + ")>Click Here</a>"];	

										}

										var myVariableHere = "Ticket Name";
										var myVariableHere2 = "Category";
										var myVariableHere3 = "Priority";
										var myVariableHere4 = "Project Name";
										var myVariableHere5 = "Created On";
										var myVariableHere6 = "Created By";
										var myVariableHere7 = "Status";
										var myVariableHere8 = "Show/Not Show";
										var myVariableHere9 = "test";

									}//end of Tech
									//If it is customer
									else{
										for (var i = 0; i < len; ++i) {										
										     mark[i] = (list[keys[i]]);					     				   								    
										}

										for (var i = 0; i < len; ++i) {										

										     this["taskid"+i] = (mark[i]['taskid']);
										     this["title"+i] = (mark[i]['title']);
										     this["category_name"+i] = (mark[i]['category_name']);
										     this["priority"+i] = (mark[i]['priority']);
										     this["project_name"+i] = (mark[i]['project_name']);
										     this["created_on"+i] = (mark[i]['created_on']);
										     
										     this["status"+i] = (mark[i]['status']);
										     

										     				   										    
										}
										for (var i = 0; i < len; ++i) {		
										     datasetx[i]  = [this["taskid"+i], this["title"+i],this["category_name"+i], this["priority"+i], this["project_name"+i], this["created_on"+i], this["status"+i], attrs = "<a data-target='#form-dialog' data-toggle='modal' onClick = show_comment(" + this["id"+i] + ")>Click Here</a>"];	

										}

										
										var myVariableHere2 = "Ticket Name";
										var myVariableHere3 = "Category";
										var myVariableHere4 = "Priority";
										var myVariableHere5 = "Project";
										var myVariableHere6 = "Created On";
										var myVariableHere7 = "Status";
										var myVariableHere = "Test";

										jQuery('#mytable2').DataTable( {
										  data: datasetx,
										  responsive: {
											details: {
												type: 'column',
												target: 'tr'
											}
										},
										
										order: [ 1, 'asc' ],
										bFilter: true,
										bLengthChange: true,
										pagingType: "simple",
										"paging": true,
										"searching": true,
										"language": {
										"info": " _START_ - _END_ of _TOTAL_ ",
										"sLengthMenu": "<span class='custom-select-title'>Rows per page:</span> <span class='custom-select'> _MENU_ </span>",
										"sSearch": "",
										"sSearchPlaceholder": "Search",
										"paginate": {
											"sNext": " ",
											"sPrevious": " "
												},
											},
											dom:
											"<'pmd-card-title'<'data-table-responsive pull-left'><'search-paper pmd-textfield'f>>" +
											"<'row'<'col-sm-12'tr>>" +
											"<'pmd-card-footer' <'pmd-datatable-pagination' l i p>>",
										  columns: [
										    { title: "id" },
										    
										    { title: myVariableHere2 },
										    { title: myVariableHere3 },
										    { title: myVariableHere4 },
										    { title: myVariableHere5 },
										    { title: myVariableHere6 },
										    { title: myVariableHere7 },
										    { title: myVariableHere }
										  ]

										});//end of datatable

									}//end of Customer

										jQuery('#mytable').DataTable( {
										  data: dataset,
										  responsive: {
											details: {
												type: 'column',
												target: 'tr'
											}
										},
										
										order: [ 1, 'asc' ],
										bFilter: true,
										bLengthChange: true,
										pagingType: "simple",
										"paging": true,
										"searching": true,
										"language": {
										"info": " _START_ - _END_ of _TOTAL_ ",
										"sLengthMenu": "<span class='custom-select-title'>Rows per page:</span> <span class='custom-select'> _MENU_ </span>",
										"sSearch": "",
										"sSearchPlaceholder": "Search",
										"paginate": {
											"sNext": " ",
											"sPrevious": " "
												},
											},
											dom:
											"<'pmd-card-title'<'data-table-responsive pull-left'><'search-paper pmd-textfield'f>>" +
											"<'row'<'col-sm-12'tr>>" +
											"<'pmd-card-footer' <'pmd-datatable-pagination' l i p>>",
										  columns: [
										    { title: "id" },
										    { title: myVariableHere },
										    { title: myVariableHere2 },
										    { title: myVariableHere3 },
										    { title: myVariableHere4 },
										    { title: myVariableHere5 },
										    { title: myVariableHere6 },
										    { title: myVariableHere7 },
										    { title: myVariableHere8 },
										    { title: myVariableHere9 }
										  ]

										});//end of datatable
								    }//end of success function

					      
					        });//end of AJAX

						};//end of ticket function
					        show_comment = function(cust, cust2) {
					    	var attrs2 = "";
					    	sessionStorage.setItem("ticket_id", cust);
					    	sessionStorage.setItem("project_id", cust2);
					    	// console.log(cust2);
					    	$.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "listTicketComments",
					                "id" : "1",
					                   "params": {
					                   				 "id": localStorage.myid,
								                     "is_customer": localStorage.data3,
								                     "internal_user_external_user": localStorage.data2,
												 //    "id": "1022",
													// "is_customer": "0",
													// "internal_user_external_user": "1",
													"ticket_id": cust




					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),


					                success: function (result) {
					                	 console.log(result);
					                	  var keys5 = Object.keys(result.result.list);								        
								        var list5 = result.result.list;
								        var len5 = keys5.length;	
								        var mark5 = [];
								        var taskid = [];
								        var dataset = [];
								        
								        console.log(list5[keys5[0]]);
								        //if it is Employee
								        if (localStorage.data2 == 1){

								        	var json = result.result.list5;
												
										         $("#comment").html("");
										        
										        for(var i = 0; i < len5; ++i){
										        	mark5[i] = (list5[keys5[i]]);
										        	var formatDate = mark5[i]['commented_on'];
								        			var responseDate = moment(formatDate).format('YYYY-MM-DD');
										            $("#comment").append("<p>"+mark5[i]['comments']+"</p><footer>"+mark5[i]['commented_by']+", <cite title='Source Title'>"+responseDate+"</cite></footer>");
										        }
										        
										$("#files2").html("");
										         var keys = Object.keys(result.result.list);

											        var list = result.result.list;
											        var len = keys.length;
											        console.log(list['A']);	
											        var mark = [];
											        var mark2 = [];
											        var taskid = [];
											        var dataset = [];
											        var count = 0;
											        for (var i = 0; i < len; ++i) {										
													     mark[i] = (list[keys[i]]);
											        if(mark[i]['files'] === undefined || mark[i]['files'].length == 0) {														   
														} else {
															dataset.push(mark[i]['files']);
														    count++;
														}
													  }
													  console.log(count);
													  console.log(mark[i]);
													  // 
											        //if it is Employee
											        
											       
											        var len2 = dataset.length;	
											        var keys2 = Object.keys(dataset);
											         console.log(dataset);
											         console.log(keys2);							  
													for (var i = 0; i < len2; ++i) {										
													     mark2[i] = (dataset[keys2[i]]);
													     
														
													     $("#files2").append("<a href = '"+dataset[i]['A']+"'>File No. "+[i]+"</a><br></br>");	
													     // console.log(mark2[i]);
													     // console.log("dataset");
													     console.log(dataset[i]['A']);				     				   								    
													}
									}//end of Employee
									//if it is Tech
									else if (localStorage.data2 == 2){
										var json = result.result.list;
												
										         $("#comment").html("");
										        
										        for(key in json)
										            $("#comment").append("<p>"+json[key].comments+"</p><footer>"+json[key].commented_by+", <cite title='Source Title'>"+json[key].commented_on+"</cite></footer>");
										

									$("#files2").html("");
										         var keys = Object.keys(result.result.list);

											        var list = result.result.list;
											        var len = keys.length;
											        console.log(list['A']);	
											        var mark = [];
											        var mark2 = [];
											        var taskid = [];
											        var dataset = [];
											        var count = 0;
											        for (var i = 0; i < len; ++i) {										
													     mark[i] = (list[keys[i]]);
											        if(mark[i]['files'] === undefined || mark[i]['files'].length == 0) {														   
														} else {
															dataset.push(mark[i]['files']);
														    count++;
														}
													  }
													  console.log(count);
													  console.log(mark[i]);
													  // 
											        //if it is Employee
											        
											       
											        var len2 = dataset.length;	
											        var keys2 = Object.keys(dataset);
											         console.log(dataset);
											         console.log(keys2);							  
													for (var i = 0; i < len2; ++i) {										
													     mark2[i] = (dataset[keys2[i]]);
													     
														
													     $("#files2").append("<a href = '"+dataset[i]['A']+"'>File No. "+[i]+"</a><br></br>");	
													     // console.log(mark2[i]);
													     // console.log("dataset");
													     console.log(dataset[i]['A']);				     				   								    
													}
									}//end of Tech
									//If it is customer
									else{
										var json = result.result.list;
												
										         $("#comment").html("");
										        
										        for(key in json)
										            $("#comment").append("<p>"+json[key].comments+"</p><footer>"+json[key].commented_by+", <cite title='Source Title'>"+json[key].commented_on+"</cite></footer>");
										
					                $("#files2").html("");
										         var keys = Object.keys(result.result.list);

											        var list = result.result.list;
											        var len = keys.length;
											        console.log(list['A']);	
											        var mark = [];
											        var mark2 = [];
											        var taskid = [];
											        var dataset = [];
											        var count = 0;
											        for (var i = 0; i < len; ++i) {										
													     mark[i] = (list[keys[i]]);
											        if(mark[i]['files'] === undefined || mark[i]['files'].length == 0) {														   
														} else {
															dataset.push(mark[i]['files']);
														    count++;
														}
													  }
													  console.log(count);
													  console.log(mark[i]);
													  // 
											        //if it is Employee
											        
											       
											        var len2 = dataset.length;	
											        var keys2 = Object.keys(dataset);
											         console.log(dataset);
											         console.log(keys2);							  
													for (var i = 0; i < len2; ++i) {										
													     mark2[i] = (dataset[keys2[i]]);
													     
														
													     $("#files2").append("<a href = '"+dataset[i]['A']+"'>File No. "+[i]+"</a><br></br>");	
													     // console.log(mark2[i]);
													     // console.log("dataset");
													     console.log(dataset[i]['A']);				     				   								    
													}
					                }
					                
					            }
					            
					                });
					    };//end of comment function

					    edit_ticket = function() {
					    	var attrs2 = "";
					    	
					    	$.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "getTicketDetails",
					                "id" : "1",
					                   "params": {
					                   				 "id": localStorage.myid,
								                     "is_customer": localStorage.data3,
								                     "internal_user_external_user": localStorage.data2,
												 //    "id": "1022",
													// "is_customer": "0",
													// "internal_user_external_user": "1",
													"ticket_id": sessionStorage.ticket_id




					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),
					                success: function (result) {
					                	// console.log("done");
					                	 console.log(result);
					                	 var fk_category_id = result.result.details.fk_category_id;
					                	 var show_to_customer = result.result.details.show_to_customer;
					                	 var tech = result.result.details.tech;				                	 
					                	 var status = result.result.details.status;
					                	 var priority = result.result.details.priority;
					                	 var hours_spent = result.result.details.hours_spent;
					                	 // var expected_start_date = result.result.details.expected_start_date;
					                	 // var expected_end_date = result.result.details.expected_end_date;
					                	 var start_date_t = result.result.details.start_date;
					                	 var start_date = moment(start_date_t).format('YYYY-MM-DD');
					                	 var resolution = result.result.details.resolution;
					                	 var expected_start_date_t = result.result.details.expected_start_date;
								         var expected_start_date = moment(expected_start_date_t).format('YYYY-MM-DD');
								         var expected_end_date_t = result.result.details.expected_end_date;
								         var expected_end_date = moment(expected_end_date_t).format('YYYY-MM-DD');
								         // console.log(expected_end_date_t);
					                	 document.getElementById("show_customer_id").value = show_to_customer;
					                	 document.getElementById("status").value = status;
					                	 document.getElementById("priority_id").value = priority;
					                	 document.getElementById("work_time_id").value = hours_spent;
					                	 document.getElementById("exp_start_date").value = expected_start_date;
					                	 document.getElementById("exp_end_date").value = expected_end_date;
					                	 document.getElementById("start_on_id").value = start_date;					                	
					                	 document.getElementById("resolution_id").value = resolution;
					                	 document.getElementById("cate_id").value = fk_category_id;
					                	 document.getElementById("Assign_id").value = tech;
					                	  // var json = result.result.details.workorder_file;
												if(result.result.details.workorder_file === undefined) {
		 										}
		 										else{
											        	$("#files").html("");
										         var keys = Object.keys(result.result.details.workorder_file);								        
											        var list = result.result.details.workorder_file;
											        var len = keys.length;
											        console.log(list['A']);	
											        var mark = [];
											        var taskid = [];
											        console.log(keys);
											        //if it is Employee
											       
											        							  
													for (var i = 0; i < len; ++i) {										
													     mark[i] = (list[keys[i]]);
													     $("#files").append("<a href = '"+mark[i]+"'>File No. "+[i]+"</a><br></br>");	
													     console.log(mark[i]);				     				   								    
													}
		  														}
										         
											        
					                }
					                });

					    	//get tech

					    	$.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "getTech",
					                "id" : "1",
					                   "params": {
					                   				 "id": localStorage.myid,
								                     "is_customer": localStorage.data3,
								                     "internal_user_external_user": localStorage.data2,
												 //    "id": "1022",
													// "is_customer": "0",
													// "internal_user_external_user": "1",
													"project_id": sessionStorage.project_id




					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),
					                success: function (result) {
					                	 console.log(result);
					                	 var json3 = result.result.list;
												
										         $("#Assign_id").html("");
										         
										        
										        for(key in json3)
										            $("#Assign_id").append("<option value='"+json3 [key].id+"'>"+json3[key].name+"</option>");
										        
										        

					                	 
					                }

					                });
					    	$.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "listTicketCategories",
					                "id" : "1",
					                   "params": {
												     "id": localStorage.myid,
								                     "is_customer": localStorage.data3,
								                     "internal_user_external_user": localStorage.data2,
												  //       "id": "1",
														// "is_customer": "1",
														// "internal_user_external_user": "0"



					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),
					                success: function (result2) {
					                	// console.log(result2);
					                	var json4 = result2.result.list;
					                	$("#cate_id").html("");
					                	for(key in json4)
										            $("#cate_id").append("<option value='"+json4 [key].id+"'>"+json4[key].name+"</option>");
					                }
					                });

					    	//end of get tech
					    	console.log("done");
					    	// $("#tech_lead").val(["1001", "1026"]);
					    	


					    };

					    add_comment = function() {
					    	//if it is employee or tech
					    	if (localStorage.data3 == 0){
					    	var task_id = sessionStorage.ticket_id;
					    	var comments = document.getElementById('comments').value;
					    	var show_to_customer = document.getElementById('show_to_customer').value;
					    	
					    	
            				// document.write("<h2>Hello "+localStorage.id+".</h2>");
           					// console.log(localStorage.id);
					    	// var attrs2 = "";
					    	// sessionStorage.setItem("ticket_id", cust);
					    	// console.log("done");
					    	$.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "addTicketComments",
					                "id" : "1",
					                   "params": {
					                   				 "id": localStorage.myid,
								                     "is_customer": localStorage.data3,
								                     "internal_user_external_user": localStorage.data2,
												 //    "id": "1022",
													// "is_customer": "0",
													// "internal_user_external_user": "1",
													"comment_details": {
														"task_id": task_id,
														"comments": comments,
														"files": [sessionStorage.result2],
														"show_to_customer":show_to_customer
														// "task_id": "12",
														// "comments": "First Comment by Employee...",
														// "show_to_customer":"0"
														}
					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),


					                success: function (result) {
					                	 console.log(result);	
					                	 if(typeof result.error !== 'undefined') {
									        if (code2 = 401) {
									        document.getElementById("alertred").click();
									   		}
									   		}else if (typeof result.result !== 'undefined'){
									   			if (code2 = 200) {
									   				document.getElementById("alertgreen2").click();
									   			}

									   		}			                	  
								   
					            }
					            
					                });
					    }//if it is customer
					    else{

					    	var task_id = sessionStorage.ticket_id;
					    	var comments = document.getElementById('comments').value;
					    	// var show_to_customer = document.getElementById('show_to_customer').value;
					    	
					    	
            				// document.write("<h2>Hello "+localStorage.id+".</h2>");
           					// console.log(localStorage.id);
					    	// var attrs2 = "";
					    	// sessionStorage.setItem("ticket_id", cust);
					    	// console.log("done");
					    	$.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "addTicketComments",
					                "id" : "1",
					                   "params": {
					                   				 "id": localStorage.myid,
								                     "is_customer": localStorage.data3,
								                     "internal_user_external_user": localStorage.data2,
												 //    "id": "1022",
													// "is_customer": "0",
													// "internal_user_external_user": "1",
													"comment_details": {
														"task_id": task_id,
														"comments": comments,
														"show_to_customer":show_to_customer
														// "task_id": "12",
														// "comments": "First Comment by Employee..."
														// "show_to_customer":"0"
														}
					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),


					                success: function (result) {
					                	 console.log(result);
					                	 if(typeof result.error !== 'undefined') {
									        if (code2 = 401) {
									        document.getElementById("alertred").click();
									   		}
									   		}else if (typeof result.result !== 'undefined'){
									   			if (code2 = 200) {
									   				document.getElementById("alertgreen2").click();
									   			}

									   		}				                	  
								   
					            }
					            
					                });

					    }
					    };//end of add comment function

					    update_ticket = function() {

					    	var show_to_customer = document.getElementById("show_customer_id").value;
					        var status = document.getElementById("status").value;
					        var priority = document.getElementById("priority_id").value;
					        var hours_spent = document.getElementById("work_time_id").value;
					        var expected_start_date = document.getElementById("exp_start_date").value;
					        var expected_end_date = document.getElementById("exp_end_date").value;
					        var start_date = document.getElementById("start_on_id").value;					                	
					        var resolution = document.getElementById("resolution_id").value;
					        var fk_category_id = document.getElementById("cate_id").value;
					        var tech = document.getElementById("Assign_id").value;

					                	 ////
					    	
           					var ticket_id = sessionStorage.ticket_id;
           					

					        $.ajax({
					            url : "http://supervisabrampton.com/index.php/api/request/",
					            type : 'POST',
					            data : JSON.stringify({
					                "jsonrpc" : "2.0",
					                "method" : "updateTicket",
					                "id" : "1",
					                   "params": {
												                             "id": localStorage.myid,
														                     "is_customer": localStorage.data3,
														                     "internal_user_external_user": localStorage.data2,
												                       //       "id": "1022",
														                     // "is_customer": "0",
														                     // "internal_user_external_user": "1",
														                     "ticket_details": {
																				"ticket_id": ticket_id,
																				"expected_start_date": expected_start_date,
																				"expected_end_date": expected_end_date,
																				"start_date": start_date,
																				"status": status,
																				"priority": priority,
																				"resolution": resolution,
																				"tech": tech,
																				"fk_category_id": fk_category_id,
																				"show_to_customer": show_to_customer,
																				// "files" :sessionStorage.result,
																				"workorder_file": [sessionStorage.result],
																				"hours_spent": hours_spent
																			}




					            				},
					            dataType : "json",
					            contentType: "application/json"
					            
					                }),
					                success: function (result) {
					                	
								        console.log(result);
								        if(typeof result.error !== 'undefined') {
									        if (code2 = 401) {
									        document.getElementById("alertred").click();
									   		}
									   		}else if (typeof result.result !== 'undefined'){
									   			if (code2 = 200) {
									   				document.getElementById("alertgreen").click();
									   				window.location.reload();
									   			}

									   		}
								    }

					      
					        });
					        
					    };

					</script>
			<div class="col-md-9">
				<!-- responsive table example -->
				<div class="pmd-card pmd-z-depth pmd-card-custom-view">
					<table id="mytable" class="table pmd-table table-hover table-striped display responsive nowrap" cellspacing="0" width="100%"></table>
					<table id="mytable2" class="table pmd-table table-hover table-striped display responsive nowrap" cellspacing="0" width="100%"></table>
					
				</div> <!-- responsive table example end -->
				
			</div> <!-- responsive table code and example end-->
		</section> <!-- Responsive table end -->
		<div tabindex="-1" class="modal fade" id="form-dialog" style="display: none;" aria-hidden="true">
												<div style="width: 85%;" class="modal-dialog">
													<div  class="modal-content">
														<div class="modal-header bordered">
															<!-- <button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button> -->
															<h3 class="pmd-card-title-text">Ticket Details</h3>
														</div>

														<div class="modal-body">
															<!--Blockquote along with the source-->
															<div class="component-box">
																<!-- Blockquote along with the source example-->
																<div class="pmd-card pmd-z-depth pmd-card-custom-form"> 
																	<div class="pmd-card-body">
																		<blockquote id = "comment" class="blockquote">
																			
																		</blockquote>
																	</div>
																</div> 
																<!--end example-->
																
																			
															</div> <!--end blockquote along with the source-->
															<!--  -->
															<div class="pmd-card pmd-z-depth pmd-card-custom-form"> 
																	<div class="pmd-card-body">
																		<div id = "files2" >
																			
																		</div>
																	</div>
																</div> <br></br>


															<section class="row component-section">
		
			<!-- Inbox like Accordion title and description -->
			 <!-- Inbox like Accordion title and description end-->
			
			<div class="col-md-9"> 
				
				<!-- Inbox like Accordion code and example -->
				<div class="component-box">
					<!-- Inbox like Accordion example -->
					<div class="panel-group pmd-accordion pmd-accordion-inbox" id="accordion6" role="tablist" aria-multiselectable="true" > 


						<!-- start -->
						<div class="panel panel-default"> 
							<div class="panel-heading" role="tab" id="headingThree">
								<h4 class="panel-title"> <a data-toggle="collapse" data-parent="#accordion6" href="#collapseThree6" aria-expanded="false" aria-controls="collapseThree6"  data-expandable="false"> Add Comments <i class="material-icons md-dark pmd-sm pmd-accordion-arrow">keyboard_arrow_down</i></a> </h4>
							</div>
							<div id="collapseThree6" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
								<div class="panel-body">
									
															
															<div class="group-fields clearfix row">
																	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
																		<div class="form-group pmd-textfield ">
																		  <label class="control-label">Comment</label>
																		  <textarea id="comments" required class="form-control"></textarea>
																		</div>
																	</div>
																</div>
																<div id = "show_cust" class="form-group pmd-textfield ">       
																	<label>Show Customer</label>
																	<select style="width: 100%" id="show_to_customer" class="select-simple form-control pmd-select2" value="">
																		<option></option>
																		<option value="1">Yes</option>
																		<option value="0">No</option>
																		
																	</select>
																</div>

																<button data-target="#form-dialog5" data-toggle='collapse' class="btn pmd-ripple-effect btn-primary pmd-z-depth" type="button">file upload</button><br></br>
																<div id="form-dialog5" class = "collapse pmd-card pmd-z-depth">
															<div class="form-group pmd-textfield">
																	<label for="first-name">Comment Files</label>
																	<div class="group-fields clearfix row pmd-card-body">
																	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
																		<input type="file" onchange="encodeImageFileAsURL2(this)" />


															<!-- Progress Bar Start -->
										                    <div id="pro_bar2" style="display: none;" class="row">
										                    	<div class="col-md-12"> 
										                      		
										                        		<div class="pmd-card-body"> 
										                          			
										                          			<div class="progress-rounded progress pmd-progress">
									                                		<div id="myBar2" class="progress-bar progress-bar-info" style="width: 0%;"></div>
									                              		</div>
										                        		</div>
										                      		
										                    	</div>
										                  </div>
										                  <!-- Progress Bar End -->
																	 
																	</div>
																</div>

																	 </div>
																	</div>
																<div class="pmd-modal-action">
															<button data-dismiss="modal" onClick=" add_comment()"  class="btn pmd-ripple-effect btn-primary" type="button">Save changes</button>
															<button data-dismiss="modal"  class="btn pmd-ripple-effect btn-default" type="button">Discard</button>
															<button style="display: none;" id = "alertgreen" type="button" data-positionX="right"data-positionY="top"data-effect="fadeInUp"data-message="You successfully updated the ticket"data-type="success" class="btn pmd-ripple-effect btn-success pmd-z-depth pmd-alert-toggle">Alert Success</button>
										 <button style="display: none;" id = "alertgreen2" type="button" data-positionX="right"data-positionY="top"data-effect="fadeInUp"data-message="You successfully added the comment"data-type="success" class="btn pmd-ripple-effect btn-success pmd-z-depth pmd-alert-toggle">Alert Success2</button>
										<button style="display: none;" id = "alertred" type="button" data-positionX="right"data-positionY="top"data-effect="fadeInUp"data-message="Something is wrong. Please try submitting again."data-type="error" class="btn pmd-ripple-effect btn-danger pmd-z-depth pmd-alert-toggle">Alert Error</button>
										</div>
														
								</div>
							</div>
						</div>


						<!-- end -->
						






						<div class="panel panel-default"> 
							<div class="panel-heading" role="tab" id="headingTwo">
								<h4 class="panel-title"> <a onClick="edit_ticket()" data-toggle="collapse" data-parent="#accordion6" href="#form-dialog3" aria-expanded="false" aria-controls="form-dialog3"  data-expandable="false">Edit Ticket <i class="material-icons md-dark pmd-sm pmd-accordion-arrow">keyboard_arrow_down</i></a> </h4>
								<!-- <button onClick="edit_ticket()" data-toggle="collapse" data-parent="#accordion6" href="#form-dialog3" aria-expanded="false" aria-controls="form-dialog3"  data-expandable="false"  class="btn pmd-btn-fab pmd-btn-raised pmd-ripple-effect btn-default btn-sm" type="button"><i class="material-icons pmd-sm">create</i></button>
																	<label for="first-name">Edit Ticket</label> -->
							</div>
							<div id="form-dialog3" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
								<div class="panel-body">
									
															
															
															
																
																
															
															
																<form class="form-horizontal">
																	<div class="form-group pmd-textfield ">       
																	<label>Category</label>
																	<select style="width: 100%" id="cate_id" class="select-simple form-control pmd-select2" value="">
																		
																		
																	</select>
																</div>
															<!-- <div class="form-group pmd-textfield">
																	<label>Category</label>
																	<select id="cate_id" style="width: 100%" value="" class="form-control select-add-tags pmd-select2-tags multi" multiple>
																		
																	</select>
															</div> -->
															<div class="form-group pmd-textfield ">       
																	<label>Show Customer</label>
																	<select style="width: 100%" id="show_customer_id" class="select-simple form-control pmd-select2" value="">
																		<option></option>
																		<option value="1">Show</option>
																		<option value="0">Dont Show</option>
																		
																	</select>
																</div>
																<div class="form-group pmd-textfield ">       
																	<label>Assigned To</label>
																	<select style="width: 100%" id="Assign_id" class="select-simple form-control pmd-select2" value="">
																		
																		
																	</select>
																</div>
																<!-- <div class="form-group pmd-textfield">
																<label>Assigned To</label>
																<select id="Assign_id" style="width: 100%" value="" class="form-control select-add-tags pmd-select2-tags multi" multiple>
																	
																</select>
															</div> -->
															<div class="form-group pmd-textfield ">       
																	<label>Status*</label>
																	<select style="width: 100%" id="status" class="select-simple form-control pmd-select2" value="">
																		<option></option>
																		<option value="1">Open</option>
																		<option value="0">Close</option>
																		
																	</select>
																</div>
																<div class="form-group pmd-textfield ">       
																	<label>Priority</label>
																	<select style="width: 100%" id="priority_id" class="select-simple form-control pmd-select2" value="">
																		<option></option>
																		<option value="1">Low</option>
																		<option value="2">Medium</option>
																		<option value="3">High</option>
																		
																	</select>
																</div>
																<div class="form-group pmd-textfield">
																	<label for="first-name">Hours Spent On Task</label>
																	<input type="text" class="mat-input form-control" id="work_time_id" value="">
																	 </div>
																	 <div class="form-group pmd-textfield">
																		<label for="regular1" class="control-label place">
																			Expected To Start
																		</label>
																		
																		<input type="date" id="exp_start_date" class="mat-input form-control" value="">
																	</div>
																	
																	<div class="form-group pmd-textfield">
																		<label for="regular1" class="control-label place">
																			Expected To Complete
																		</label>
																		
																		<input type="date" id="exp_end_date" class="mat-input form-control" value="">
																	</div>
																	<div class="form-group pmd-textfield">
																		<label for="regular1" class="control-label place">
																			Started On
																		</label>
																		
																		<input type="date" id="start_on_id" class="mat-input form-control" value="">
																	</div>
																	
															<div class="group-fields clearfix row">
																	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
																		<div class="form-group pmd-textfield ">
																		  <label class="control-label">Resolution</label>
																		  <textarea id="resolution_id" required class="form-control" value = ""></textarea>
																		</div>
																	</div>
																</div>
																<div class="pmd-card pmd-z-depth pmd-card-custom-form"> 
																	<div class="pmd-card-body">
																		<div id = "files" >
																			
																		</div>
																	</div>
																</div> <br></br>

																<button data-target="#form-dialog4" data-toggle='collapse' class="btn pmd-ripple-effect btn-primary pmd-z-depth" type="button">file upload</button><br></br>
																<div id="form-dialog4" class = "collapse pmd-card pmd-z-depth">
															<div class="form-group pmd-textfield">
																	<label for="first-name">Invoice Files</label>
																	<div class="group-fields clearfix row pmd-card-body">
																	<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
																		<input type="file" onchange="encodeImageFileAsURL(this)" />


															<!-- Progress Bar Start -->
										                    <div id="pro_bar" style="display: none;" class="row">
										                    	<div class="col-md-12"> 
										                      		
										                        		<div class="pmd-card-body"> 
										                          			
										                          			<div class="progress-rounded progress pmd-progress">
									                                		<div id="myBar" class="progress-bar progress-bar-info" style="width: 0%;"></div>
									                              		</div>
										                        		</div>
										                      		
										                    	</div>
										                  </div>
										                  <!-- Progress Bar End -->
																	 
																	</div>
																</div>

																	 </div>
																	</div>
																
																
															</form>
														
														<div class="pmd-modal-action">
															<button data-dismiss="modal" onClick="update_ticket()"  class="btn pmd-ripple-effect btn-primary" type="button">Save changes</button>
															<button data-dismiss="modal"  class="btn pmd-ripple-effect btn-default" type="button">Discard</button>
														</div>
													
												
															
								</div>
							</div>
						</div>

						<!-- end -->
						
						

					</div> <!-- Inbox like Accordion example end-->
					
				</div> <!-- Inbox like Accordion code and example end-->
			</div>
		</section>

															<!--  -->

															<form class="form-horizontal">
																<div class="form-group pmd-textfield">
																	
																	
																						
																<div class="panel-group pmd-accordion pmd-accordion-inbox" id="accordion" role="tablist" aria-multiselectable="true" >
																<div class = "card">
																	<!-- <button  data-target='#form-dialog2' data-parent="#accordion" data-toggle='collapse'  class="btn pmd-btn-fab pmd-btn-raised pmd-ripple-effect btn-default btn-sm" type="button"><i class="material-icons pmd-sm">add</i></button>
																	<label for="first-name">Add Comment</label>	 -->
																
													
															</div>

															<!-- edit ticket -->
															<div class="card">
																<!-- <button onClick="edit_ticket()" data-parent="#accordion" data-target='#form-dialog3' data-toggle='collapse'  class="btn pmd-btn-fab pmd-btn-raised pmd-ripple-effect btn-default btn-sm" type="button"><i class="material-icons pmd-sm">create</i></button>
																	<label for="first-name">Edit Ticket</label> -->
															
														</div>
													</div>
															<!-- edit ticket end -->
																
																
															</form>
														</div>
														
													</div>
												</div>
											</div>
		
	
	</div>
<!--tab start-->

<!--content area end-->

</div><!--end content area-->

<!-- Footer Starts -->
<!--footer start-->
<footer class="admin-footer">
 <div class="container-fluid">
 	<ul class="list-unstyled list-inline">
	 	<li>
			<span class="pmd-card-subtitle-text">Synergy &copy; <span class="auto-update-year"></span>. All Rights Reserved.</span>
			<!-- <h3 class="pmd-card-subtitle-text">Licensed under <a href="https://opensource.org/licenses/MIT" target="_blank">MIT license.</a></h3> -->
        </li>
        
    </ul>
 </div>
</footer>
<!--footer end-->
<!-- Footer Ends -->

<!-- Scripts Starts -->
<script src="../../assets/js/jquery-1.12.2.min.js"></script>
<script src="../../assets/js/bootstrap.min.js"></script>
<script src="../../assets/js/propeller.min.js"></script>



<!-- Scripts Ends -->


<!-- Datatable js -->
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>

<!-- Datatable Bootstrap -->
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js"></script>

<!-- Datatable responsive js-->
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/responsive/2.1.0/js/dataTables.responsive.min.js"></script>

<!-- Datatable select js-->
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/select/1.2.0/js/dataTables.select.min.js"></script>

<!-- Propeller Data table js-->


<!-- Responsive Data table js-->
<script type="text/javascript">
	//File Uploads Start

	
   function encodeImageFileAsURL(element) {
   	pro_bar.style.display = "block";
  var file = element.files[0];
  var reader = new FileReader();
  reader.onloadend = function() {
    console.log('RESULT', reader.result);
    sessionStorage.setItem("result", reader.result);
    var elem = document.getElementById("myBar");   
  var width = 10;
  var id = setInterval(frame, 10);
  function frame() {
    if (width >= 100) {
      clearInterval(id);
    } else {
      width++; 
      elem.style.width = width + '%'; 
      elem.innerHTML = width * 1  + '%';
    }
  }
    // console.log(sessionStorage.result);

     
  }
  reader.readAsDataURL(file);
}
function encodeImageFileAsURL2(element) {
   	pro_bar2.style.display = "block";
  var file = element.files[0];
  var reader = new FileReader();
  reader.onloadend = function() {
    console.log('RESULT', reader.result);
    sessionStorage.setItem("result2", reader.result);
    var elem = document.getElementById("myBar2");   
  var width = 10;
  var id = setInterval(frame, 10);
  function frame() {
    if (width >= 100) {
      clearInterval(id);
    } else {
      width++; 
      elem.style.width = width + '%'; 
      elem.innerHTML = width * 1  + '%';
    }
  }
    // console.log(sessionStorage.result);

     
  }
  reader.readAsDataURL(file);
}
</script>


<script type="text/javascript">
				// var data3 = 0; 
				// var x1 = document.getElementById("profiles_menu_id");
				// var x2 = document.getElementById("invoice_menu_id");
				// var x3 = document.getElementById("report_menu_id");	
				// var x4 = document.getElementById("project_menu_id");
				// var x5 = document.getElementById("add_project_menu_id");
				// var x6 = document.getElementById("add_invoice_menu_id");
				// var x7 = document.getElementById("profile_report_menu_id");
				// var x8 = document.getElementById("project_report_menu_id");
				var x15 = document.getElementById("show_cust");
				var x16 = document.getElementById("add_tic");

				//for tech
            	if (localStorage.data2 == 0) {
							
				 
				 // x1.style.display = "none";
				 // x2.style.display = "none";
				 // x4.style.display = "none";	
				 // x7.style.display = "none";
				 // x8.style.display = "none";
				 x16.style.display = "none";			 
				}
				//for customer
				if (localStorage.data3 == 1) {
				
				
				 // x.style.display = "none";
				 
				 // x1.style.display = "none";
				 // x3.style.display = "none";
				 // x5.style.display = "none";
				 // x6.style.display = "none";
				 x15.style.display = "none";
				 // x16.style.display = "none";
				}
			</script>
			

</body>
</html>